"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.validate = exports.getValidator = exports.countNumbers = exports.countUpperCase = exports.count = exports.ValidationType = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _validationFunc;

var ValidationType;
exports.ValidationType = ValidationType;

(function (ValidationType) {
  ValidationType["Require"] = "isRequired";
  ValidationType["MinLength"] = "minLength";
  ValidationType["MaxLength"] = "maxLength";
  ValidationType["MinValue"] = "minValue";
  ValidationType["MaxValue"] = "maxValue";
  ValidationType["MinUppercaseCharacters"] = "minUppercaseCharacters";
  ValidationType["MaxUppercaseCharacters"] = "maxUppercaseCharacters";
  ValidationType["MinNumericalSymbols"] = "minNumericalSymbols";
  ValidationType["MaxNumericalSymbols"] = "maxNumericalSymbols";
  ValidationType["CustomRule"] = "customRule";
})(ValidationType || (exports.ValidationType = ValidationType = {}));

var count = function count(target, callback) {
  var result = 0;

  for (var i = 0; i < target.length; i++) {
    if (callback(target[i])) {
      result++;
    }
  }

  return result;
};

exports.count = count;

var countUpperCase = function countUpperCase(target) {
  return count(target, function (e) {
    return e >= 'A' && e <= 'Z';
  });
};

exports.countUpperCase = countUpperCase;

var countNumbers = function countNumbers(target) {
  return count(target, function (e) {
    var n = parseInt(e);
    return typeof n === 'number' && !Number.isNaN(n);
  });
};

exports.countNumbers = countNumbers;
var validationFunc = (_validationFunc = {}, (0, _defineProperty2["default"])(_validationFunc, ValidationType.Require, function (value, isValid) {
  return isValid && value.toString().trim().length > 0;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinLength, function (value, isValid, validator) {
  return isValid && value.toString().trim().length >= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MaxLength, function (value, isValid, validator) {
  return isValid && value.toString().trim().length <= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinValue, function (value, isValid, validator) {
  return isValid && +value >= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MaxValue, function (value, isValid, validator) {
  return isValid && +value <= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinUppercaseCharacters, function (value, isValid, validator) {
  var uppercaseChars = countUpperCase(value.toString());
  return isValid && uppercaseChars >= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MaxUppercaseCharacters, function (value, isValid, validator) {
  var uppercaseChars = countUpperCase(value.toString());
  return isValid && uppercaseChars <= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinNumericalSymbols, function (value, isValid, validator) {
  var numericalSymbols = countNumbers(value.toString());
  return isValid && numericalSymbols >= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MaxNumericalSymbols, function (value, isValid, validator) {
  var numericalSymbols = countNumbers(value.toString());
  return isValid && numericalSymbols <= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.CustomRule, function (value, isValid, validator, state) {
  return isValid && typeof validator.value === 'function' && validator.value(value, state);
}), _validationFunc);

var getValidator = function getValidator(type, value) {
  return {
    type: type,
    value: value
  };
};

exports.getValidator = getValidator;

var validate = function validate(value, validators, state) {
  var isValid = true;
  validators.forEach(function (validator) {
    var func = validationFunc[validator.type];

    if (typeof func !== 'undefined') {
      isValid = func(value, isValid, validator, state);
    }
  });
  return isValid;
};

exports.validate = validate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9mb3JtLnZhbGlkYXRpb24udHMiXSwibmFtZXMiOlsiVmFsaWRhdGlvblR5cGUiLCJjb3VudCIsInRhcmdldCIsImNhbGxiYWNrIiwicmVzdWx0IiwiaSIsImxlbmd0aCIsImNvdW50VXBwZXJDYXNlIiwiZSIsImNvdW50TnVtYmVycyIsIm4iLCJwYXJzZUludCIsIk51bWJlciIsImlzTmFOIiwidmFsaWRhdGlvbkZ1bmMiLCJSZXF1aXJlIiwidmFsdWUiLCJpc1ZhbGlkIiwidG9TdHJpbmciLCJ0cmltIiwiTWluTGVuZ3RoIiwidmFsaWRhdG9yIiwiTWF4TGVuZ3RoIiwiTWluVmFsdWUiLCJNYXhWYWx1ZSIsIk1pblVwcGVyY2FzZUNoYXJhY3RlcnMiLCJ1cHBlcmNhc2VDaGFycyIsIk1heFVwcGVyY2FzZUNoYXJhY3RlcnMiLCJNaW5OdW1lcmljYWxTeW1ib2xzIiwibnVtZXJpY2FsU3ltYm9scyIsIk1heE51bWVyaWNhbFN5bWJvbHMiLCJDdXN0b21SdWxlIiwic3RhdGUiLCJnZXRWYWxpZGF0b3IiLCJ0eXBlIiwidmFsaWRhdGUiLCJ2YWxpZGF0b3JzIiwiZm9yRWFjaCIsImZ1bmMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7SUFFWUEsYzs7O1dBQUFBLGM7QUFBQUEsRUFBQUEsYztBQUFBQSxFQUFBQSxjO0FBQUFBLEVBQUFBLGM7QUFBQUEsRUFBQUEsYztBQUFBQSxFQUFBQSxjO0FBQUFBLEVBQUFBLGM7QUFBQUEsRUFBQUEsYztBQUFBQSxFQUFBQSxjO0FBQUFBLEVBQUFBLGM7QUFBQUEsRUFBQUEsYztHQUFBQSxjLDhCQUFBQSxjOztBQWdDTCxJQUFNQyxLQUFLLEdBQUcsU0FBUkEsS0FBUSxDQUFDQyxNQUFELEVBQWlCQyxRQUFqQixFQUFrRTtBQUNuRixNQUFJQyxNQUFNLEdBQUcsQ0FBYjs7QUFDQSxPQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdILE1BQU0sQ0FBQ0ksTUFBM0IsRUFBbUNELENB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R0FBR3hCLGNBQWMsQ0FBQ08sU0FBUyxDQUFDYSxJQUFYLENBQXZEOztBQUNBLFFBQUksT0FBT0ksSUFBUCxLQUFnQixXQUFwQixFQUFpQztBQUM3QnJCLE1BQUFBLE9BQU8sR0FBR3FCLElBQUksQ0FBQ3RCLEtBQUQsRUFBUUMsT0FBUixFQUFpQkksU0FBakIsRUFBNEJXLEtBQTVCLENBQWQ7QUFDSDtBQUNKLEdBTEQ7QUFNQSxTQUFPZixPQUFQO0FBQ0gsQ0FUTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZvcm1TdGF0ZSwgRm9ybVZhbHVlVHlwZSwgRm9ybVN0YXRlQ29uc3RyYWludCB9IGZyb20gJy4vZm9ybS5ob29rJztcblxuZXhwb3J0IGVudW0gVmFsaWRhdGlvblR5cGUge1xuICAgIFJlcXVpcmUgPSAnaXNSZXF1aXJlZCcsXG4gICAgTWluTGVuZ3RoID0gJ21pbkxlbmd0aCcsXG4gICAgTWF4TGVuZ3RoID0gJ21heExlbmd0aCcsXG4gICAgTWluVmFsdWUgPSAnbWluVmFsdWUnLFxuICAgIE1heFZhbHVlID0gJ21heFZhbHVlJyxcbiAgICBNaW5VcHBlcmNhc2VDaGFyYWN0ZXJzID0gJ21pblVwcGVyY2FzZUNoYXJhY3RlcnMnLFxuICAgIE1heFVwcGVyY2FzZUNoYXJhY3RlcnMgPSAnbWF4VXBwZXJjYXNlQ2hhcmFjdGVycycsXG4gICAgTWluTnVtZXJpY2FsU3ltYm9scyA9ICdtaW5OdW1lcmljYWxTeW1ib2xzJyxcbiAgICBNYXhOdW1lcmljYWxTeW1ib2xzID0gJ21heE51bWVyaWNhbFN5bWJvbHMnLFxuICAgIEN1c3RvbVJ1bGUgPSAnY3VzdG9tUnVsZSdcbn1cblxuZXhwb3J0IHR5cGUgQ3VzdG9tVmFsaWRhdGlvblJ1bGU8VCBleHRlbmRzIEZvcm1WYWx1ZVR5cGUsIFMgZXh0ZW5kcyBGb3JtU3RhdGVDb25zdHJhaW50ID0gYW55PiA9IChcbiAgICB2YWx1ZTogVCxcbiAgICBzdGF0ZTogRm9ybVN0YXRlPFM+XG4pID0+IGJvb2xlYW47XG5cbmV4cG9ydCB0eXBlIFZhbGlkYXRpb25WYWx1ZSA9IEZvcm1WYWx1ZVR5cGUgfCBDdXN0b21WYWxpZGF0aW9uUnVsZTxhbnksIGFueT47XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdG9yIHtcbiAgICB0eXBlOiBWYWxpZGF0aW9uVHlwZTtcbiAgICB2YWx1ZTogVmFsaWRhdGlvblZhbHVlO1xufVxuXG5leHBvcnQgdHlwZSBWYWxpZGF0aW9uRnVuYyA9IChcbiAgICB2YWx1ZTogRm9ybVZhbHVlVHlwZSxcbiAgICBpc1ZhbGlkOiBib29sZWFuLFxuICAgIHZhbGlkYXRvcjogVmFsaWRhdG9yLFxuICAgIHN0YXRlOiBGb3JtU3RhdGU8YW55PlxuKSA9PiBib29sZWFuO1xuXG5leHBvcnQgY29uc3QgY291bnQgPSAodGFyZ2V0OiBzdHJpbmcsIGNhbGxiYWNrOiAoZW50cnk6IHN0cmluZykgPT4gYm9vbGVhbik6IG51bWJlciA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKHRhcmdldFtpXSkpIHtcbiAgICAgICAgICAgIHJlc3VsdCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgY291bnRVcHBlckNhc2UgPSAodGFyZ2V0OiBzdHJpbmcpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiBjb3VudCh0YXJnZXQsIChlKSA9PiBlID49ICdBJyAmJiBlIDw9ICdaJyk7XG59O1xuXG5leHBvcnQgY29uc3QgY291bnROdW1iZXJzID0gKHRhcmdldDogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gY291bnQodGFyZ2V0LCAoZSkgPT4ge1xuICAgICAgICBjb25zdCBuID0gcGFyc2VJbnQoZSk7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTihuKTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IHZhbGlkYXRpb25GdW5jOiB7IFtrZXk6IHN0cmluZ106IFZhbGlkYXRpb25GdW5jIH0gPSB7XG4gICAgW1ZhbGlkYXRpb25UeXBlLlJlcXVpcmVdOiAodmFsdWUsIGlzVmFsaWQpID0+IHtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgdmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoID4gMDtcbiAgICB9LFxuICAgIFtWYWxpZGF0aW9uVHlwZS5NaW5MZW5ndGhdOiAodmFsdWUsIGlzVmFsaWQsIHZhbGlkYXRvcikgPT4ge1xuICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiB2YWx1ZS50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggPj0gdmFsaWRhdG9yLnZhbHVlO1xuICAgIH0sXG4gICAgW1ZhbGlkYXRpb25UeXBlLk1heExlbmd0aF06ICh2YWx1ZSwgaXNWYWxpZCwgdmFsaWRhdG9yKSA9PiB7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkICYmIHZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCA8PSB2YWxpZGF0b3IudmFsdWU7XG4gICAgfSxcbiAgICBbVmFsaWRhdGlvblR5cGUuTWluVmFsdWVdOiAodmFsdWUsIGlzVmFsaWQsIHZhbGlkYXRvcikgPT4ge1xuICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiArdmFsdWUgPj0gdmFsaWRhdG9yLnZhbHVlO1xuICAgIH0sXG4gICAgW1ZhbGlkYXRpb25UeXBlLk1heFZhbHVlXTogKHZhbHVlLCBpc1ZhbGlkLCB2YWxpZGF0b3IpID0+IHtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgK3ZhbHVlIDw9IHZhbGlkYXRvci52YWx1ZTtcbiAgICB9LFxuICAgIFtWYWxpZGF0aW9uVHlwZS5NaW5VcHBlcmNhc2VDaGFyYWN0ZXJzXTogKHZhbHVlLCBpc1ZhbGlkLCB2YWxpZGF0b3IpID0+IHtcbiAgICAgICAgY29uc3QgdXBwZXJjYXNlQ2hhcnM6IG51bWJlciA9IGNvdW50VXBwZXJDYXNlKHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiB1cHBlcmNhc2VDaGFycyA+PSB2YWxpZGF0b3IudmFsdWU7XG4gICAgfSxcbiAgICBbVmFsaWRhdGlvblR5cGUuTWF4VXBwZXJjYXNlQ2hhcmFjdGVyc106ICh2YWx1ZSwgaXNWYWxpZCwgdmFsaWRhdG9yKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwcGVyY2FzZUNoYXJzOiBudW1iZXIgPSBjb3VudFVwcGVyQ2FzZSh2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgdXBwZXJjYXNlQ2hhcnMgPD0gdmFsaWRhdG9yLnZhbHVlO1xuICAgIH0sXG4gICAgW1ZhbGlkYXRpb25UeXBlLk1pbk51bWVyaWNhbFN5bWJvbHNdOiAodmFsdWUsIGlzVmFsaWQsIHZhbGlkYXRvcikgPT4ge1xuICAgICAgICBjb25zdCBudW1lcmljYWxTeW1ib2xzOiBudW1iZXIgPSBjb3VudE51bWJlcnModmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkICYmIG51bWVyaWNhbFN5bWJvbHMgPj0gdmFsaWRhdG9yLnZhbHVlO1xuICAgIH0sXG4gICAgW1ZhbGlkYXRpb25UeXBlLk1heE51bWVyaWNhbFN5bWJvbHNdOiAodmFsdWUsIGlzVmFsaWQsIHZhbGlkYXRvcikgPT4ge1xuICAgICAgICBjb25zdCBudW1lcmljYWxTeW1ib2xzOiBudW1iZXIgPSBjb3VudE51bWJlcnModmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkICYmIG51bWVyaWNhbFN5bWJvbHMgPD0gdmFsaWRhdG9yLnZhbHVlO1xuICAgIH0sXG4gICAgW1ZhbGlkYXRpb25UeXBlLkN1c3RvbVJ1bGVdOiAodmFsdWUsIGlzVmFsaWQsIHZhbGlkYXRvciwgc3RhdGUpID0+IHtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgdHlwZW9mIHZhbGlkYXRvci52YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWxpZGF0b3IudmFsdWUodmFsdWUsIHN0YXRlKTtcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0VmFsaWRhdG9yID0gKHR5cGU6IFZhbGlkYXRpb25UeXBlLCB2YWx1ZTogVmFsaWRhdGlvblZhbHVlKTogVmFsaWRhdG9yID0+ICh7IHR5cGUsIHZhbHVlIH0pO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGUgPSAodmFsdWU6IEZvcm1WYWx1ZVR5cGUsIHZhbGlkYXRvcnM6IFZhbGlkYXRvcltdLCBzdGF0ZTogRm9ybVN0YXRlPGFueT4pOiBib29sZWFuID0+IHtcbiAgICBsZXQgaXNWYWxpZDogYm9vbGVhbiA9IHRydWU7XG4gICAgdmFsaWRhdG9ycy5mb3JFYWNoKCh2YWxpZGF0b3IpID0+IHtcbiAgICAgICAgY29uc3QgZnVuYzogVmFsaWRhdGlvbkZ1bmMgfCB1bmRlZmluZWQgPSB2YWxpZGF0aW9uRnVuY1t2YWxpZGF0b3IudHlwZV07XG4gICAgICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlzVmFsaWQgPSBmdW5jKHZhbHVlLCBpc1ZhbGlkLCB2YWxpZGF0b3IsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc1ZhbGlkO1xufTtcbiJdfQ==