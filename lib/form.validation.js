"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.validate = exports.getValidator = exports.ValidationType = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _validationFunc;

var ValidationType;
exports.ValidationType = ValidationType;

(function (ValidationType) {
  ValidationType["Require"] = "isRequired";
  ValidationType["MinLength"] = "minLength";
  ValidationType["MaxLength"] = "maxLength";
  ValidationType["MinValue"] = "minValue";
  ValidationType["MaxValue"] = "maxValue";
  ValidationType["MinUppercaseCharacters"] = "minUppercaseCharacters";
  ValidationType["MinNumericalSymbols"] = "minNumericalSymbols";
  ValidationType["CustomRule"] = "customRule";
})(ValidationType || (exports.ValidationType = ValidationType = {}));

var validationFunc = (_validationFunc = {}, (0, _defineProperty2["default"])(_validationFunc, ValidationType.Require, function (value, isValid) {
  return isValid && value.toString().trim().length > 0;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinLength, function (value, isValid, validator) {
  return isValid && value.toString().trim().length >= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MaxLength, function (value, isValid, validator) {
  return isValid && value.toString().trim().length <= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinValue, function (value, isValid, validator) {
  return isValid && +value >= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MaxValue, function (value, isValid, validator) {
  return isValid && +value <= validator.value;
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinUppercaseCharacters, function (value, isValid, validator) {
  var uppercaseChars = 0;
  var stringifiedValue = value.toString();

  for (var i = 0; i < stringifiedValue.length; i++) {
    var e = stringifiedValue[i];

    if (e >= 'A' && e <= 'Z') {
      uppercaseChars++;
    }
  }

  return isValid && uppercaseChars >= (validator.value || 0);
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.MinNumericalSymbols, function (value, isValid, validator) {
  var numericalSymbols = 0;
  var stringifiedValue = value.toString();

  for (var i = 0; i < stringifiedValue.length; i++) {
    var n = parseInt(stringifiedValue[i]);

    if (typeof n === 'number' && !Number.isNaN(n)) {
      numericalSymbols++;
    }
  }

  return isValid && numericalSymbols >= (validator.value || 0);
}), (0, _defineProperty2["default"])(_validationFunc, ValidationType.CustomRule, function (value, isValid, validator, state) {
  return isValid && typeof validator.value === 'function' && validator.value(value, state);
}), _validationFunc);

var getValidator = function getValidator(type, value) {
  return {
    type: type,
    value: value
  };
};

exports.getValidator = getValidator;

var validate = function validate(value, validators, state) {
  var isValid = true;
  validators.forEach(function (validator) {
    var func = validationFunc[validator.type];

    if (typeof func !== 'undefined') {
      isValid = func(value, isValid, validator, state);
    }
  });
  return isValid;
};

exports.validate = validate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9mb3JtLnZhbGlkYXRpb24udHMiXSwibmFtZXMiOlsiVmFsaWRhdGlvblR5cGUiLCJ2YWxpZGF0aW9uRnVuYyIsIlJlcXVpcmUiLCJ2YWx1ZSIsImlzVmFsaWQiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJNaW5MZW5ndGgiLCJ2YWxpZGF0b3IiLCJNYXhMZW5ndGgiLCJNaW5WYWx1ZSIsIk1heFZhbHVlIiwiTWluVXBwZXJjYXNlQ2hhcmFjdGVycyIsInVwcGVyY2FzZUNoYXJzIiwic3RyaW5naWZpZWRWYWx1ZSIsImkiLCJlIiwiTWluTnVtZXJpY2FsU3ltYm9scyIsIm51bWVyaWNhbFN5bWJvbHMiLCJuIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsIkN1c3RvbVJ1bGUiLCJzdGF0ZSIsImdldFZhbGlkYXRvciIsInR5cGUiLCJ2YWxpZGF0ZSIsInZhbGlkYXRvcnMiLCJmb3JFYWNoIiwiZnVuYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztJQUVZQSxjOzs7V0FBQUEsYztBQUFBQSxFQUFBQSxjO0FBQUFBLEVBQUFBLGM7QUFBQUEsRUFBQUEsYztBQUFBQSxFQUFBQSxjO0FBQUFBLEVBQUFBLGM7QUFBQUEsRUFBQUEsYztBQUFBQSxFQUFBQSxjO0FBQUFBLEVBQUFBLGM7R0FBQUEsYyw4QkFBQUEsYzs7QUErQlosSUFBTUMsY0FBaUQsNEVBQ2xERCxjQUFjLENBQUNFLE9BRG1DLEVBQ3pCLFVBQUNDLEtBQUQsRUFBUUMsT0FBUixFQUFvQjtBQUMxQyxTQUFPQSxPQUFPLElBQUlELEtBQUssQ0FBQ0UsUUFBTixHQUFpQkMsSUFBakIsR0FBd0JDLE1BQXhCLEdBQWlDLENBQW5EO0FBQ0gsQ0FIa0QscURBSWxEUCxjQUFjLENBQUNRLFNBSm1DLEVBSXZCLFVBQUNMLEtBQUQsRUFBUUMsT0FBUixFQUFpQkssU0FBakIsRUFBK0I7QUFDdkQsU0FBT0wsT0FBTyxJQUFJRCxLQUFLLENBQUNFLFFBQU4sR0FBaUJDLElBQWpCLEdB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QTtBQUFSLEdBQTVEO0FBQUEsQ0FBckI7Ozs7QUFFQSxJQUFNeUIsUUFBUSxHQUFHLFNBQVhBLFFBQVcsQ0FBQ3pCLEtBQUQsRUFBdUIwQixVQUF2QixFQUFnREosS0FBaEQsRUFBbUY7QUFDdkcsTUFBSXJCLE9BQWdCLEdBQUcsSUFBdkI7QUFDQXlCLEVBQUFBLFVBQVUsQ0FBQ0MsT0FBWCxDQUFtQixVQUFDckIsU0FBRCxFQUFlO0FBQzlCLFFBQU1zQixJQUFnQyxHQUFHOUIsY0FBYyxDQUFDUSxTQUFTLENBQUNrQixJQUFYLENBQXZEOztBQUNBLFFBQUksT0FBT0ksSUFBUCxLQUFnQixXQUFwQixFQUFpQztBQUM3QjNCLE1BQUFBLE9BQU8sR0FBRzJCLElBQUksQ0FBQzVCLEtBQUQsRUFBUUMsT0FBUixFQUFpQkssU0FBakIsRUFBNEJnQixLQUE1QixDQUFkO0FBQ0g7QUFDSixHQUxEO0FBTUEsU0FBT3JCLE9BQVA7QUFDSCxDQVRNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9ybVN0YXRlLCBGb3JtVmFsdWVUeXBlLCBGb3JtU3RhdGVDb25zdHJhaW50IH0gZnJvbSAnLi9mb3JtLmhvb2snO1xuXG5leHBvcnQgZW51bSBWYWxpZGF0aW9uVHlwZSB7XG4gICAgUmVxdWlyZSA9ICdpc1JlcXVpcmVkJyxcbiAgICBNaW5MZW5ndGggPSAnbWluTGVuZ3RoJyxcbiAgICBNYXhMZW5ndGggPSAnbWF4TGVuZ3RoJyxcbiAgICBNaW5WYWx1ZSA9ICdtaW5WYWx1ZScsXG4gICAgTWF4VmFsdWUgPSAnbWF4VmFsdWUnLFxuICAgIE1pblVwcGVyY2FzZUNoYXJhY3RlcnMgPSAnbWluVXBwZXJjYXNlQ2hhcmFjdGVycycsXG4gICAgTWluTnVtZXJpY2FsU3ltYm9scyA9ICdtaW5OdW1lcmljYWxTeW1ib2xzJyxcbiAgICAvLyBUT0RPIG1ha2UgdGhlICdtYXgnIHZlcnNpb24gb2YgdGhlIHR3byBhYm92ZSB0eXBlc1xuICAgIEN1c3RvbVJ1bGUgPSAnY3VzdG9tUnVsZSdcbn1cblxuZXhwb3J0IHR5cGUgQ3VzdG9tVmFsaWRhdGlvblJ1bGU8VCBleHRlbmRzIEZvcm1WYWx1ZVR5cGUsIFMgZXh0ZW5kcyBGb3JtU3RhdGVDb25zdHJhaW50ID0gYW55PiA9IChcbiAgICB2YWx1ZTogVCxcbiAgICBzdGF0ZTogRm9ybVN0YXRlPFM+XG4pID0+IGJvb2xlYW47XG5cbmV4cG9ydCB0eXBlIFZhbGlkYXRpb25WYWx1ZSA9IEZvcm1WYWx1ZVR5cGUgfCBDdXN0b21WYWxpZGF0aW9uUnVsZTxhbnksIGFueT47XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdG9yIHtcbiAgICB0eXBlOiBWYWxpZGF0aW9uVHlwZTtcbiAgICB2YWx1ZTogVmFsaWRhdGlvblZhbHVlO1xufVxuXG5leHBvcnQgdHlwZSBWYWxpZGF0aW9uRnVuYyA9IChcbiAgICB2YWx1ZTogRm9ybVZhbHVlVHlwZSxcbiAgICBpc1ZhbGlkOiBib29sZWFuLFxuICAgIHZhbGlkYXRvcjogVmFsaWRhdG9yLFxuICAgIHN0YXRlOiBGb3JtU3RhdGU8YW55PlxuKSA9PiBib29sZWFuO1xuXG5jb25zdCB2YWxpZGF0aW9uRnVuYzogeyBba2V5OiBzdHJpbmddOiBWYWxpZGF0aW9uRnVuYyB9ID0ge1xuICAgIFtWYWxpZGF0aW9uVHlwZS5SZXF1aXJlXTogKHZhbHVlLCBpc1ZhbGlkKSA9PiB7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkICYmIHZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCA+IDA7XG4gICAgfSxcbiAgICBbVmFsaWRhdGlvblR5cGUuTWluTGVuZ3RoXTogKHZhbHVlLCBpc1ZhbGlkLCB2YWxpZGF0b3IpID0+IHtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgdmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoID49IHZhbGlkYXRvci52YWx1ZTtcbiAgICB9LFxuICAgIFtWYWxpZGF0aW9uVHlwZS5NYXhMZW5ndGhdOiAodmFsdWUsIGlzVmFsaWQsIHZhbGlkYXRvcikgPT4ge1xuICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiB2YWx1ZS50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggPD0gdmFsaWRhdG9yLnZhbHVlO1xuICAgIH0sXG4gICAgW1ZhbGlkYXRpb25UeXBlLk1pblZhbHVlXTogKHZhbHVlLCBpc1ZhbGlkLCB2YWxpZGF0b3IpID0+IHtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgK3ZhbHVlID49IHZhbGlkYXRvci52YWx1ZTtcbiAgICB9LFxuICAgIFtWYWxpZGF0aW9uVHlwZS5NYXhWYWx1ZV06ICh2YWx1ZSwgaXNWYWxpZCwgdmFsaWRhdG9yKSA9PiB7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkICYmICt2YWx1ZSA8PSB2YWxpZGF0b3IudmFsdWU7XG4gICAgfSxcbiAgICBbVmFsaWRhdGlvblR5cGUuTWluVXBwZXJjYXNlQ2hhcmFjdGVyc106ICh2YWx1ZSwgaXNWYWxpZCwgdmFsaWRhdG9yKSA9PiB7XG4gICAgICAgIGxldCB1cHBlcmNhc2VDaGFyczogbnVtYmVyID0gMDtcbiAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5naWZpZWRWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGUgPSBzdHJpbmdpZmllZFZhbHVlW2ldO1xuICAgICAgICAgICAgaWYgKGUgPj0gJ0EnICYmIGUgPD0gJ1onKSB7XG4gICAgICAgICAgICAgICAgdXBwZXJjYXNlQ2hhcnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiB1cHBlcmNhc2VDaGFycyA+PSAodmFsaWRhdG9yLnZhbHVlIHx8IDApO1xuICAgIH0sXG4gICAgW1ZhbGlkYXRpb25UeXBlLk1pbk51bWVyaWNhbFN5bWJvbHNdOiAodmFsdWUsIGlzVmFsaWQsIHZhbGlkYXRvcikgPT4ge1xuICAgICAgICBsZXQgbnVtZXJpY2FsU3ltYm9sczogbnVtYmVyID0gMDtcbiAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5naWZpZWRWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG4gPSBwYXJzZUludChzdHJpbmdpZmllZFZhbHVlW2ldKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbiA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTihuKSkge1xuICAgICAgICAgICAgICAgIG51bWVyaWNhbFN5bWJvbHMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiBudW1lcmljYWxTeW1ib2xzID49ICh2YWxpZGF0b3IudmFsdWUgfHwgMCk7XG4gICAgfSxcbiAgICBbVmFsaWRhdGlvblR5cGUuQ3VzdG9tUnVsZV06ICh2YWx1ZSwgaXNWYWxpZCwgdmFsaWRhdG9yLCBzdGF0ZSkgPT4ge1xuICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiB0eXBlb2YgdmFsaWRhdG9yLnZhbHVlID09PSAnZnVuY3Rpb24nICYmIHZhbGlkYXRvci52YWx1ZSh2YWx1ZSwgc3RhdGUpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRWYWxpZGF0b3IgPSAodHlwZTogVmFsaWRhdGlvblR5cGUsIHZhbHVlOiBGb3JtVmFsdWVUeXBlKTogVmFsaWRhdG9yID0+ICh7IHR5cGUsIHZhbHVlIH0pO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGUgPSAodmFsdWU6IEZvcm1WYWx1ZVR5cGUsIHZhbGlkYXRvcnM6IFZhbGlkYXRvcltdLCBzdGF0ZTogRm9ybVN0YXRlPGFueT4pOiBib29sZWFuID0+IHtcbiAgICBsZXQgaXNWYWxpZDogYm9vbGVhbiA9IHRydWU7XG4gICAgdmFsaWRhdG9ycy5mb3JFYWNoKCh2YWxpZGF0b3IpID0+IHtcbiAgICAgICAgY29uc3QgZnVuYzogVmFsaWRhdGlvbkZ1bmMgfCB1bmRlZmluZWQgPSB2YWxpZGF0aW9uRnVuY1t2YWxpZGF0b3IudHlwZV07XG4gICAgICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlzVmFsaWQgPSBmdW5jKHZhbHVlLCBpc1ZhbGlkLCB2YWxpZGF0b3IsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc1ZhbGlkO1xufTtcbiJdfQ==